<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<head th:replace="fragments/header :: header"/>
<body>
<div class="container w-50">
    <div class="text-white text-center">
        <h2>회원가입</h2>
    </div>
    <form th:action="@{/user}" th:object="${form}"
          method="POST" onsubmit="return submitCheck();">

        <div class="mb-2">
            <label for="exampleFormControlInput1" class="form-label text-white">이메일(아이디)</label>
            <input type="text" id="mail" name="email" th:field="*{email}"
                   th:class="${#fields.hasErrors('email')} ? 'form-control fieldError' : 'form-control'">
            <br>
            <button type="button" id="sendMail" class="btn btn-warning mb-3">인증번호 발송</button>
            <input type="hidden" id="compare-text" placeholder="이메일인증을 진행해주세요!">
        </div>

        <input type="hidden" id="authCode">

        <div class="mb-2 input-box row justify-content-start">
            <div class="col-4">
                <!-- <label for="inputPassword2" class="visually-hidden">인증</label> -->
                <input type="text" class="form-control w-100" id="checkCode" placeholder="인증번호를 입력하세요.">
            </div>
            <div class="col-4">
                <button type="button" id="check-btn"
                        class="btn btn-warning mb-3">이메일 인증</button>
            </div>
            <p class="text-white" th:if="${#fields.hasErrors('email')}" th:errors="*{email}"></p>
        </div>

        <div class="mb-2">
            <label for="exampleFormControlInput1" class="form-label text-white">비밀번호</label>
            <input type="password" name="password" th:fields="*{password}" th:class="${#fields.hasErrors('password')} ? 'form-control fieldError' : 'form-control'"
                   placeholder="비밀번호를 입력하세요.">
            <p class="text-white" th:if="${#fields.hasErrors('password')}" th:errors="*{password}"></p>
        </div>

        <div class="mb-2">
            <label for="exampleFormControlInput1" class="form-label text-white">전화번호</label>
            <input type="text" name="phoneNumber" th:field="*{phoneNumber}"
                   id="exampleFormControlInput1" th:class="${#fields.hasErrors('phoneNumber')} ? 'form-control fieldError' : 'form-control'" placeholder="생년월일을 입력하세요.">
            <p class="text-white" th:if="${#fields.hasErrors('phoneNumber')}" th:errors="*{phoneNumber}"></p>
        </div>

        <input type="hidden" name="auth" value="ROLE_USER" checked="checked"> user <br>

        <input type="hidden" id="isCertificate" value="false" >
        <div class="btn-group" role="group" aria-label="Basic outlined example">
            <button type="submit" class="submit-btn btn btn-warning w-75">회원가입 하기</button>
        </div>
    </form>
</div>
<script type="text/javascript" src="/js/email.js"></script>
</body>
</html>